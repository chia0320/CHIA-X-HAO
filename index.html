<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>CHIA X HAO ğŸ‡¯ğŸ‡µ ä¹å·ä¹‹æ—…</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    :root {
      --bg-main: #f7f5ef;
      --bg-header: #d9e2d2;
      --bg-tab: #e7ecdf;
      --tab-active: #b8c9b1;
      --text-main: #3e4a3f;
      --card-bg: #ffffff;
      --card-shadow: rgba(0,0,0,0.08);
      --accent: #6f8f72;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; font-family: "Noto Sans TC"; }

    body {
      background: var(--bg-main);
      display: flex;
      justify-content: center;
      padding: 24px 12px;
      color: var(--text-main);
    }

    .app {
      width: 100%;
      max-width: 420px;
      background: var(--bg-main);
      border-radius: 24px;
      overflow: hidden;
      box-shadow: 0 12px 32px rgba(0,0,0,0.08);
      border: 1px solid #e5e2da;
    }

    .app-header { padding: 20px 20px 12px; background: var(--bg-header); }
    .trip-name { font-size: 22px; font-weight: 700; }
    .trip-sub { font-size: 16px; margin-top: 4px; opacity: .85; }
    .trip-dates { font-size: 12px; margin-top: 6px; opacity: .7; }

    .day-tabs {
      display: flex; gap: 8px; padding: 12px 16px 18px;
      overflow-x: auto; background: var(--bg-main);
      scrollbar-width: none;
    }
    .day-tabs::-webkit-scrollbar { display: none; }

    .day-tab {
      flex:0 0 auto; min-width:64px; padding:10px 8px;
      border-radius:14px; background:var(--bg-tab); text-align:center;
      font-size:12px; cursor:pointer; color:var(--text-main);
      border:1px solid #d6d8ce; transition:.2s;
    }
    .day-tab.active { background:var(--tab-active); border-color:#a7b89f; transform:translateY(-1px); }

    .content { padding: 18px; }
    .day-header { display:flex; justify-content:space-between; margin-bottom:14px; }
    .day-title-block { font-size:18px; font-weight:700; }
    .day-title-block small { font-size:12px; opacity:.7; }

    .weather { text-align:right; color:var(--accent); }
    .weather .temp { font-size:20px; font-weight:700; }

    .card {
      background:var(--card-bg); border-radius:18px; padding:14px;
      margin-bottom:10px; cursor:pointer;
      border:1px solid #ecebe6;
      box-shadow:0 6px 14px var(--card-shadow);
      transition:.15s;
    }
    .card:hover { transform:translateY(-2px); box-shadow:0 10px 22px rgba(0,0,0,0.12); }

    .card-header { display:flex; justify-content:space-between; margin-bottom:6px; }
    .time { font-size:17px; font-weight:700; color:var(--accent); }
    .tag { font-size:12px; padding:3px 8px; border-radius:999px; background:#eef3ea; border:1px solid #dae4d6; }

    .card-title { font-size:15px; font-weight:600; margin-bottom:4px; }
    .card-subtitle { font-size:13px; opacity:.7; }

  </style>
</head>

<body>

  <div class="app">

    <!-- Header -->
    <header class="app-header">
      <div class="trip-name">CHIA X HAO ğŸ‡¯ğŸ‡µ ä¹å·ä¹‹æ—…</div>
      <div class="trip-sub">Kyushu Japan</div>
      <div class="trip-dates">JAN 01 â€“ JAN 06, 2026</div>
    </header>

    <!-- â­ ä½ ç¼ºå°‘çš„å°±æ˜¯é€™å…©å€‹å€å¡Š â­ -->
    <nav class="day-tabs" id="dayTabs"></nav>
    <main class="content" id="dayContent"></main>
    <!-- â­ ç¼ºå®ƒå€‘å…§å®¹å°±å…¨ç©ºç™½ â­ -->

  </div>

<script>

  /* ====== è¡Œç¨‹è¡¨ï¼ˆæˆ‘ä¿ç•™ä½ åŸå§‹å…§å®¹ï¼‰ ====== */
  const itinerary = <?= JSON_encode_your_data_here ?> 
  /* æˆ‘é€™è£¡ç°¡è¿°ï¼Œå¯¦éš›å¥—ç”¨ä½ åŸæœ¬çš„ itinerary */

</script>
<script>

  const API_KEY = "f59530fab0600c5a0ff62aa969a9e59a";

  async function getWeather(city) {
    const url = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${API_KEY}&units=metric&lang=zh_tw`;
    try {
      const r = await fetch(url);
      const d = await r.json();
      return { temp: Math.round(d.main.temp), icon: convertIcon(d.weather[0].icon) };
    } catch { return { temp:"--", icon:"ğŸŒ¤" }; }
  }

  function convertIcon(code) {
    if (code.includes("01")) return "â˜€ï¸";
    if (code.includes("02")) return "â›…ï¸";
    if (code.includes("03")) return "ğŸŒ¥";
    if (code.includes("04")) return "â˜ï¸";
    if (code.includes("09")) return "ğŸŒ§";
    if (code.includes("10")) return "ğŸŒ¦";
    if (code.includes("11")) return "â›ˆ";
    if (code.includes("13")) return "â„ï¸";
    if (code.includes("50")) return "ğŸŒ«";
    return "ğŸŒ¤";
  }

  const dayTabs = document.getElementById("dayTabs");
  const dayContent = document.getElementById("dayContent");

  itinerary.forEach((day, idx)=> {
    const btn = document.createElement("button");
    btn.className = "day-tab" + (idx===0 ? " active" : "");
    btn.innerHTML = `<span class="date">${day.date}</span><span class="label">${day.id}</span>`;
    btn.onclick = ()=> renderDay(idx);
    dayTabs.appendChild(btn);
  });

  async function renderDay(index) {
    [...dayTabs.children].forEach((t,i)=> t.classList.toggle("active", i===index));
    const day = itinerary[index];
    const weather = await getWeather(day.city);

    dayContent.innerHTML = `
      <div class="day-header">
        <div class="day-title-block">
          ${day.title}
          <small>${day.date}ï¼ˆ${day.weekday}ï¼‰</small>
        </div>
        <div class="weather">
          <div class="temp">${weather.temp}Â°</div>
          <div>${weather.icon} ${day.city}</div>
        </div>
      </div>

      ${day.events.map(e=>`
        <div class="card" onclick="openMap('${e.map}')">
          <div class="card-header">
            <div class="time">${e.time}</div>
            <div class="tag">${e.tag}</div>
          </div>
          <div class="card-title">${e.title}</div>
        </div>
      `).join("")}
    `;
  }

  function openMap(url){ window.open(url, "_blank"); }

  renderDay(0);

</script>

</body>
</html>
